{
  "contentVersion": "1.0.0.0",
  "parameters": {
    "workbookDisplayName": {
      "type": "string",
      "defaultValue": "Azure Disk Performance Summary",
      "metadata": {
        "description": "The friendly name for the workbook that is used in the Gallery or Saved List.  This name must be unique within a resource group."
      }
    },
    "workbookType": {
      "type": "string",
      "defaultValue": "workbook",
      "metadata": {
        "description": "The gallery that the workbook will been shown under. Supported values include workbook, tsg, etc. Usually, this is 'workbook'"
      }
    },
    "workbookSourceId": {
      "type": "string",
      "defaultValue": "Azure Monitor",
      "metadata": {
        "description": "The id of resource instance to which the workbook will be associated"
      }
    },
    "workbookId": {
      "type": "string",
      "defaultValue": "[newGuid()]",
      "metadata": {
        "description": "The unique guid for this workbook instance"
      }
    }
  },
  "resources": [
    {
      "name": "[parameters('workbookId')]",
      "type": "microsoft.insights/workbooks",
      "location": "[resourceGroup().location]",
      "apiVersion": "2018-06-17-preview",
      "dependsOn": [],
      "kind": "shared",
      "properties": {
        "displayName": "[parameters('workbookDisplayName')]",
        "serializedData": "{\"version\":\"Notebook/1.0\",\"items\":[{\"type\":1,\"content\":{\"json\":\"## VM Disk Usage\\n---\\n\\n\"},\"name\":\"text - 2\"},{\"type\":9,\"content\":{\"version\":\"KqlParameterItem/1.0\",\"parameters\":[{\"id\":\"073783b8-2700-4b6b-b23a-5edefdf72797\",\"version\":\"KqlParameterItem/1.0\",\"name\":\"TimeRange\",\"type\":4,\"typeSettings\":{\"selectableValues\":[{\"durationMs\":3600000},{\"durationMs\":14400000},{\"durationMs\":43200000},{\"durationMs\":86400000},{\"durationMs\":172800000},{\"durationMs\":259200000},{\"durationMs\":604800000},{\"durationMs\":1209600000},{\"durationMs\":2592000000},{\"durationMs\":5184000000},{\"durationMs\":7776000000}],\"allowCustom\":true},\"value\":{\"durationMs\":2592000000}},{\"id\":\"191cdc7f-3689-4f79-8f3f-02114bdb2117\",\"version\":\"KqlParameterItem/1.0\",\"name\":\"subscription\",\"type\":6,\"isRequired\":true,\"multiSelect\":true,\"quote\":\"'\",\"delimiter\":\",\",\"query\":\"summarize by subscriptionId\\r\\n| project value = strcat('/subscriptions/', subscriptionId), label = subscriptionId\",\"crossComponentResources\":[\"value::all\"],\"value\":[\"/subscriptions/2de20a16-20c6-41af-82cd-bceb39195d1c\"],\"typeSettings\":{\"resourceTypeFilter\":{\"microsoft.resources/subscriptions\":true},\"additionalResourceOptions\":[]},\"queryType\":1,\"resourceType\":\"microsoft.resourcegraph/resources\"},{\"id\":\"e81ff94e-69db-4938-8bd3-b69b4e7dbddf\",\"version\":\"KqlParameterItem/1.0\",\"name\":\"Workspace\",\"type\":5,\"isRequired\":true,\"multiSelect\":true,\"quote\":\"'\",\"delimiter\":\",\",\"query\":\"where type =~ 'microsoft.operationalinsights/workspaces'\\r\\n| summarize by id, name\\r\\n| project id\",\"crossComponentResources\":[\"{subscription}\"],\"value\":[\"/subscriptions/2de20a16-20c6-41af-82cd-bceb39195d1c/resourceGroups/rg-shared-sc-weu/providers/Microsoft.OperationalInsights/workspaces/la-prod-sc-weu\"],\"typeSettings\":{\"resourceTypeFilter\":{\"microsoft.operationalinsights/workspaces\":true},\"additionalResourceOptions\":[\"value::5\"]},\"queryType\":1,\"resourceType\":\"microsoft.resourcegraph/resources\"},{\"id\":\"3b033277-2f8d-4db0-bfd1-e8c06c1ce531\",\"version\":\"KqlParameterItem/1.0\",\"name\":\"rg\",\"label\":\"ResurceGroup\",\"type\":2,\"multiSelect\":true,\"quote\":\"'\",\"delimiter\":\",\",\"query\":\"Heartbeat\\r\\n| where TimeGenerated {TimeRange}\\r\\n| extend spltres=split(_ResourceId,'/')\\r\\n| where tostring(spltres[2])  in ({subscription:subid}) or '*' in ({subscription:subid})\\r\\n| project rg=tostring(spltres[4])\\r\\n| distinct rg\\r\\n| sort by rg asc\",\"crossComponentResources\":[\"{Workspace}\"],\"typeSettings\":{\"additionalResourceOptions\":[\"value::all\"],\"selectAllValue\":\"*\"},\"queryType\":0,\"resourceType\":\"microsoft.operationalinsights/workspaces\",\"value\":[\"value::all\"]}],\"style\":\"pills\",\"queryType\":0,\"resourceType\":\"microsoft.operationalinsights/workspaces\"},\"name\":\"parameters - 2\"},{\"type\":9,\"content\":{\"version\":\"KqlParameterItem/1.0\",\"crossComponentResources\":[\"{Workspace}\"],\"parameters\":[{\"id\":\"eac9e917-6c40-4cb6-a2a5-f3c051ebfc84\",\"version\":\"KqlParameterItem/1.0\",\"name\":\"VMInsightsEnabled\",\"type\":2,\"query\":\"VMComputer | take 1\",\"crossComponentResources\":[\"{Workspace}\"],\"isHiddenWhenLocked\":true,\"typeSettings\":{\"additionalResourceOptions\":[]},\"queryType\":0,\"resourceType\":\"microsoft.operationalinsights/workspaces\"},{\"id\":\"e1c584fa-2400-4f74-8923-551614b84284\",\"version\":\"KqlParameterItem/1.0\",\"name\":\"vminv\",\"type\":1,\"value\":\"let inv=VMComputer | summarize arg_max(TimeGenerated, *) by ResourceId=_ResourceId | project ResourceId , AzureSize ,Cpus , CpuSpeed ,PhysicalMemoryMB;\",\"isHiddenWhenLocked\":true,\"criteriaData\":[{\"criteriaContext\":{\"operator\":\"Default\",\"rightValType\":\"param\",\"resultValType\":\"expression\",\"resultVal\":\"let inv=VMComputer | summarize arg_max(TimeGenerated, *) by ResourceId=_ResourceId | project ResourceId , AzureSize ,Cpus , CpuSpeed ,PhysicalMemoryMB;\"}}]},{\"id\":\"10125af8-3d2c-4744-893d-b69758549154\",\"version\":\"KqlParameterItem/1.0\",\"name\":\"isSecurityEnabled\",\"type\":2,\"query\":\"SecurityEvent | take 1\",\"crossComponentResources\":[\"{Workspace}\"],\"isHiddenWhenLocked\":true,\"typeSettings\":{\"additionalResourceOptions\":[]},\"queryType\":0,\"resourceType\":\"microsoft.operationalinsights/workspaces\"}],\"style\":\"pills\",\"queryType\":0,\"resourceType\":\"microsoft.operationalinsights/workspaces\"},\"conditionalVisibility\":{\"parameterName\":\"showhidden\",\"comparison\":\"isNotEqualTo\"},\"name\":\"parameters - 2 - Copy\"},{\"type\":1,\"content\":{\"json\":\"### Select Subscription and TimeRange for Performance Analysis \\r\\n\\r\\nSelected Subscription :{subscription:label} \\r\\nSelected Resource Group : {rg}\\r\\n\"},\"name\":\"text - 3\"},{\"type\":3,\"content\":{\"version\":\"KqlItem/1.0\",\"query\":\"Resources\\r\\n|where type == \\\"microsoft.compute/disks\\\"\\r\\n| where subscriptionId in ({subscription:subid}) or '*' in ({subscription:subid})\\r\\n| project id=tolower(id) , location, DiskType=tostring(sku.tier) ,  sku=tostring(sku.name) , diskSizeGB=toint(properties.diskSizeGB), MBps=properties.diskMBpsReadWrite, IOPSLimit=properties.diskIOPSReadWrite, resourceGroup,OwnerVM=managedBy,subscriptionId\\r\\n| summarize count() by  sku, subscriptionId\\r\\n\\r\\n\\r\\n\",\"size\":0,\"title\":\"Managed Disks Summary\",\"queryType\":1,\"resourceType\":\"microsoft.resourcegraph/resources\",\"crossComponentResources\":[\"{subscription}\"],\"visualization\":\"piechart\",\"tileSettings\":{\"titleContent\":{\"columnMatch\":\"sku\",\"formatter\":1,\"formatOptions\":{}},\"leftContent\":{\"columnMatch\":\"count_\",\"formatter\":8,\"formatOptions\":{\"palette\":\"yellowOrangeRed\"},\"numberFormat\":{\"unit\":17,\"options\":{\"style\":\"decimal\",\"useGrouping\":false,\"maximumFractionDigits\":2,\"maximumSignificantDigits\":3}}},\"showBorder\":false},\"graphSettings\":{\"type\":2,\"topContent\":{\"columnMatch\":\"sku\",\"formatter\":1,\"formatOptions\":{}},\"centerContent\":{\"columnMatch\":\"count_\",\"formatter\":1,\"formatOptions\":{},\"numberFormat\":{\"unit\":17,\"options\":{\"style\":\"decimal\",\"useGrouping\":false,\"maximumFractionDigits\":2,\"maximumSignificantDigits\":3}}},\"hivesContent\":{\"columnMatch\":\"subscriptionId\",\"formatter\":1,\"formatOptions\":{}},\"nodeIdField\":\"sku\",\"nodeSize\":null,\"staticNodeSize\":100,\"colorSettings\":{\"nodeColorField\":\"count_\",\"type\":1,\"colorPalette\":\"default\"},\"groupByField\":\"subscriptionId\",\"hivesMargin\":10},\"chartSettings\":{\"seriesLabelSettings\":[{\"seriesName\":\"Standard_LRS\",\"color\":\"blue\"},{\"seriesName\":\"Premium_LRS\",\"color\":\"orange\"},{\"seriesName\":\"StandardSSD_LRS\",\"color\":\"yellow\"}]}},\"customWidth\":\"30\",\"name\":\"query - 13 - Copy\"},{\"type\":3,\"content\":{\"version\":\"KqlItem/1.0\",\"query\":\"Resources\\r\\n|where type == \\\"microsoft.compute/disks\\\"\\r\\n| where subscriptionId in ({subscription:subid}) or '*' in ({subscription:subid})\\r\\n| project id=tolower(id) , location, DiskType=tostring(sku.tier) ,  sku=tostring(sku.name) , diskSizeGB=toint(properties.diskSizeGB), MBps=properties.diskMBpsReadWrite, IOPSLimit=properties.diskIOPSReadWrite, resourceGroup,OwnerVM=managedBy,subscriptionId\\r\\n| summarize count() by  DiskType=strcat(sku,' - ',tostring(diskSizeGB),' GB'),diskSizeGB,subscriptionId\\r\\n\\r\\n\\r\\n\",\"size\":0,\"title\":\"Managed Disks Sizes\",\"queryType\":1,\"resourceType\":\"microsoft.resourcegraph/resources\",\"crossComponentResources\":[\"{subscription}\"],\"visualization\":\"tiles\",\"tileSettings\":{\"titleContent\":{\"columnMatch\":\"DiskType\",\"formatter\":1},\"leftContent\":{\"columnMatch\":\"count_\",\"formatter\":8,\"formatOptions\":{\"palette\":\"yellowOrangeRed\"},\"numberFormat\":{\"unit\":17,\"options\":{\"style\":\"decimal\",\"useGrouping\":false,\"maximumFractionDigits\":2,\"maximumSignificantDigits\":3}}},\"showBorder\":false},\"graphSettings\":{\"type\":2,\"topContent\":{\"columnMatch\":\"sku\",\"formatter\":1,\"formatOptions\":{}},\"centerContent\":{\"columnMatch\":\"count_\",\"formatter\":1,\"formatOptions\":{},\"numberFormat\":{\"unit\":17,\"options\":{\"style\":\"decimal\",\"useGrouping\":false,\"maximumFractionDigits\":2,\"maximumSignificantDigits\":3}}},\"hivesContent\":{\"columnMatch\":\"subscriptionId\",\"formatter\":1,\"formatOptions\":{}},\"nodeIdField\":\"sku\",\"nodeSize\":null,\"staticNodeSize\":100,\"colorSettings\":{\"nodeColorField\":\"count_\",\"type\":1,\"colorPalette\":\"default\"},\"groupByField\":\"subscriptionId\",\"hivesMargin\":10},\"chartSettings\":{\"seriesLabelSettings\":[{\"seriesName\":\"Standard_LRS\",\"color\":\"turquoise\"},{\"seriesName\":\"Premium_LRS\",\"color\":\"orange\"},{\"seriesName\":\"StandardSSD_LRS\",\"color\":\"yellow\"}]}},\"customWidth\":\"70\",\"name\":\"query - 13 - Copy - Copy\"},{\"type\":1,\"content\":{\"json\":\"## Please select a Resource Group or select **ALL**   to see all VMS\\r\\n\\r\\n\\r\\n\\r\\n\\r\\n\\r\\n\\r\\n\",\"style\":\"warning\"},\"conditionalVisibility\":{\"parameterName\":\"rg\",\"comparison\":\"isEqualTo\"},\"name\":\"text - 11\"},{\"type\":12,\"content\":{\"version\":\"NotebookGroup/1.0\",\"groupType\":\"editable\",\"title\":\"VM Usage \",\"items\":[{\"type\":9,\"content\":{\"version\":\"KqlParameterItem/1.0\",\"parameters\":[{\"id\":\"582c425e-8c37-4e87-87f0-efc17aa7274a\",\"version\":\"KqlParameterItem/1.0\",\"name\":\"Aggregates\",\"label\":\"Percentile\",\"type\":2,\"typeSettings\":{\"additionalResourceOptions\":[]},\"jsonData\":\"[\\r\\n    { \\\"value\\\":\\\"round(avg(Val), 2)\\\", \\\"label\\\":\\\"Average\\\", \\\"selected\\\":false },\\r\\n    { \\\"value\\\":\\\"round(percentile(Val, 1), 2)\\\", \\\"label\\\":\\\"P1st\\\", \\\"selected\\\":false},\\r\\n    { \\\"value\\\":\\\"round(percentile(Val, 5), 2)\\\", \\\"label\\\":\\\"P5th\\\", \\\"selected\\\":false},\\r\\n    { \\\"value\\\":\\\"round(percentile(Val, 10), 2)\\\", \\\"label\\\":\\\"P10th\\\", \\\"selected\\\":false},\\r\\n    { \\\"value\\\":\\\"round(percentile(Val, 50), 2)\\\", \\\"label\\\":\\\"P50th\\\", \\\"selected\\\":false},\\r\\n    { \\\"value\\\":\\\"round(percentile(Val, 90), 2)\\\", \\\"label\\\":\\\"P90th\\\", \\\"selected\\\":false},\\r\\n    { \\\"value\\\":\\\"round(percentile(Val, 95), 2)\\\", \\\"label\\\":\\\"P95th\\\", \\\"selected\\\":true},\\r\\n    { \\\"value\\\":\\\"round(percentile(Val, 99), 2)\\\", \\\"label\\\":\\\"P99th\\\", \\\"selected\\\":false}  \\r\\n]\",\"timeContext\":{\"durationMs\":2592000000},\"timeContextFromParameter\":\"TimeRange\"},{\"id\":\"2db5301e-bd7b-479d-a375-f247e2e5757d\",\"version\":\"KqlParameterItem/1.0\",\"name\":\"AggregatesRight\",\"type\":1,\"query\":\"print \\\"{Aggregates}\\\"\",\"crossComponentResources\":[\"{Workspace}\"],\"isHiddenWhenLocked\":true,\"timeContext\":{\"durationMs\":2592000000},\"timeContextFromParameter\":\"TimeRange\",\"queryType\":0,\"resourceType\":\"microsoft.operationalinsights/workspaces\"}],\"style\":\"pills\",\"queryType\":0,\"resourceType\":\"microsoft.operationalinsights/workspaces\"},\"name\":\"parameters - 20 - Copy\"},{\"type\":3,\"content\":{\"version\":\"KqlItem/1.0\",\"query\":\"let diskmetrics=InsightsMetrics\\r\\n| where TimeGenerated  {TimeRange}\\r\\n| extend subid=tostring(split(_ResourceId, '/')[2]) \\r\\n| where subid in ({subscription:subid}) or '*' in ({subscription:subid}) \\r\\n| where tostring(split(_ResourceId,'/')[4])  in ({rg}) or '*' in ({rg})\\r\\n| where Namespace == \\\"LogicalDisk\\\"\\r\\n| where Name  in (\\r\\n\\\"TransferLatencyMs\\\", \\\"ReadLatencyMs\\\",\\\"WriteLatencyMs\\\"\\r\\n\\\"BytesPerSecond\\\",\\\"ReadsPerSecond\\\",\\\"WritesPerSecond\\\",\\\"TransfersPerSecond\\\")\\r\\n| extend Disk = tostring(parse_json(Tags).[\\\"vm.azm.ms/mountId\\\"])\\r\\n|summarize Value={AggregatesRight} by  Computer, Disk, ResourceId=_ResourceId , Name;\\r\\nInsightsMetrics\\r\\n| where TimeGenerated  {TimeRange}\\r\\n| extend subid=tostring(split(_ResourceId, '/')[2]) \\r\\n| where subid in ({subscription:subid}) or '*' in ({subscription:subid}) \\r\\n| where tostring(split(_ResourceId,'/')[4])  in ({rg}) or '*' in ({rg})\\r\\n| where Namespace == \\\"LogicalDisk\\\"\\r\\n| where Name == \\\"FreeSpaceMB\\\"\\r\\n| extend Disk = tostring(parse_json(Tags).[\\\"vm.azm.ms/mountId\\\"])\\r\\n| extend SizeMB = tostring(parse_json(Tags).[\\\"vm.azm.ms/diskSizeMB\\\"])\\r\\n| summarize arg_max(TimeGenerated,*) by  Computer, Disk, ResourceId=_ResourceId\\r\\n| project Computer, Disk, ResourceId , DiskFreeGB=round(Val/1024,0),SizeGB=round(todouble(SizeMB)/1024,0)\\r\\n| join kind= leftouter\\r\\n(\\r\\n   diskmetrics\\r\\n| where Name == \\\"TransferLatencyMs\\\"\\r\\n| project Disk, ResourceId,Computer, TransferLatencyMs=Value\\r\\n) on Computer, Disk , ResourceId\\r\\n| join kind= leftouter\\r\\n(\\r\\n   diskmetrics\\r\\n| where Name == \\\"ReadLatencyMs\\\"\\r\\n| project Disk, ResourceId,Computer, ReadLatencyMs=Value\\r\\n) on Computer, Disk , ResourceId\\r\\n| join kind= leftouter\\r\\n(\\r\\n   diskmetrics\\r\\n| where Name == \\\"WriteLatencyMs\\\"\\r\\n| project Disk, ResourceId,Computer, WriteLatencyMs=Value\\r\\n) on Computer, Disk , ResourceId\\r\\n| join kind= leftouter\\r\\n(\\r\\n   diskmetrics\\r\\n| where Name == \\\"TransfersPerSecond\\\"\\r\\n| project Disk, ResourceId,Computer, TransfersPerSecond=Value\\r\\n) on Computer, Disk , ResourceId\\r\\n| join kind= leftouter\\r\\n(\\r\\n   diskmetrics\\r\\n| where Name == \\\"ReadsPerSecond\\\"\\r\\n| project Disk, ResourceId,Computer, ReadsPerSecond=Value\\r\\n) on Computer, Disk , ResourceId\\r\\n| join kind= leftouter\\r\\n(\\r\\n   diskmetrics\\r\\n| where Name == \\\"WritesPerSecond\\\"\\r\\n| project Disk, ResourceId,Computer, WritesPerSecond=Value\\r\\n) on Computer, Disk , ResourceId\\r\\n| project ResourceId,Computer, Disk, SizeGB,DiskFreeGB,['% Free']=round(DiskFreeGB*100/SizeGB,0), TransfersPerSecond,TransferLatencyMs,ReadsPerSecond,ReadLatencyMs,WritesPerSecond,WriteLatencyMs\",\"size\":0,\"title\":\"Disk Performance Data\",\"timeContext\":{\"durationMs\":0},\"timeContextFromParameter\":\"TimeRange\",\"exportedParameters\":[{\"fieldName\":\"Computer\",\"parameterName\":\"Computer\",\"parameterType\":1},{\"fieldName\":\"ResourceId\",\"parameterName\":\"ResourceId\",\"parameterType\":1}],\"showExportToExcel\":true,\"exportToExcelOptions\":\"all\",\"queryType\":0,\"resourceType\":\"microsoft.operationalinsights/workspaces\",\"crossComponentResources\":[\"{Workspace}\"],\"gridSettings\":{\"formatters\":[{\"columnMatch\":\"Computer\",\"formatter\":5},{\"columnMatch\":\"% Free\",\"formatter\":18,\"formatOptions\":{\"thresholdsOptions\":\"icons\",\"thresholdsGrid\":[{\"operator\":\"<=\",\"thresholdValue\":\"5\",\"representation\":\"4\",\"text\":\"{0}{1}\"},{\"operator\":\"<=\",\"thresholdValue\":\"10\",\"representation\":\"2\",\"text\":\"{0}{1}\"},{\"operator\":\"Default\",\"thresholdValue\":null,\"representation\":\"success\",\"text\":\"{0}{1}\"}]},\"numberFormat\":{\"unit\":0,\"options\":{\"style\":\"decimal\"}}},{\"columnMatch\":\"TransfersPerSecond\",\"formatter\":4,\"formatOptions\":{\"palette\":\"greenRed\"}},{\"columnMatch\":\"TransferLatencyMs\",\"formatter\":4,\"formatOptions\":{\"palette\":\"greenRed\"}},{\"columnMatch\":\"ReadsPerSecond\",\"formatter\":4,\"formatOptions\":{\"palette\":\"blue\"}},{\"columnMatch\":\"ReadLatencyMs\",\"formatter\":4,\"formatOptions\":{\"palette\":\"greenRed\"}},{\"columnMatch\":\"WritesPerSecond\",\"formatter\":4,\"formatOptions\":{\"palette\":\"orange\"}},{\"columnMatch\":\"WriteLatencyMs\",\"formatter\":4,\"formatOptions\":{\"palette\":\"greenRed\"}}],\"rowLimit\":2000,\"filter\":true,\"sortBy\":[{\"itemKey\":\"$gen_bar_TransfersPerSecond_6\",\"sortOrder\":2}],\"labelSettings\":[{\"columnId\":\"ResourceId\"},{\"columnId\":\"Computer\"},{\"columnId\":\"Disk\"},{\"columnId\":\"SizeGB\"},{\"columnId\":\"DiskFreeGB\",\"label\":\"FreeGB\"},{\"columnId\":\"% Free\"},{\"columnId\":\"TransfersPerSecond\",\"label\":\"IOPs\"},{\"columnId\":\"TransferLatencyMs\",\"label\":\"IOPsLatency(ms)\"},{\"columnId\":\"ReadsPerSecond\"},{\"columnId\":\"ReadLatencyMs\"},{\"columnId\":\"WritesPerSecond\"},{\"columnId\":\"WriteLatencyMs\"}]},\"sortBy\":[{\"itemKey\":\"$gen_bar_TransfersPerSecond_6\",\"sortOrder\":2}]},\"showPin\":true,\"name\":\"query - 0 - Copy - Copy\"},{\"type\":3,\"content\":{\"version\":\"KqlItem/1.0\",\"query\":\"Resources\\r\\n|where type == \\\"microsoft.compute/virtualmachines\\\"\\r\\n| where id=~\\\"{ResourceId}\\\"\\r\\n| project name,disktype=\\\"OsDisk\\\",diskname=properties.storageProfile.osDisk.name, Size=properties.storageProfile.osDisk.diskSizeGB ,DiskType=iff(isempty(tostring(properties.storageProfile.osDisk.vhd.uri)),\\\"ManagedDisk\\\",\\\"VHD\\\"),  [\\\"vhd/diskid\\\"]= iff(isempty(tostring(properties.storageProfile.osDisk.vhd.uri)),tolower(tostring(properties.storageProfile.osDisk.managedDisk.id)),tostring(properties.storageProfile.osDisk.vhd.uri))\\r\\n|union (\\r\\nResources\\r\\n|where type == \\\"microsoft.compute/virtualmachines\\\"\\r\\n| where id=~\\\"{ResourceId}\\\"\\r\\n| mvexpand disk=properties.storageProfile.dataDisks\\r\\n| project name , disktype=\\\"DataDisk\\\",diskname=disk.name,Size=disk.diskSizeGB ,DiskType=iff(isempty(tostring(properties.storageProfile.osDisk.vhd.uri)),\\\"ManagedDisk\\\",\\\"VHD\\\"),  [\\\"vhd/diskid\\\"]= iff(isempty(tostring(properties.storageProfile.osDisk.vhd.uri)),tolower(tostring(properties.storageProfile.osDisk.managedDisk.id)),tostring(properties.storageProfile.osDisk.vhd.uri)))\\r\\n| join kind= leftouter(\\r\\nResources\\r\\n|where type == \\\"microsoft.compute/disks\\\"\\r\\n| project id=tolower(id) , location, DiskType=tostring(sku.tier) ,  sku=tostring(sku.name) , diskSizeGB=toint(properties.diskSizeGB), MBps=properties.diskMBpsReadWrite, IOPSLimit=properties.diskIOPSReadWrite, resourceGroup,OwnerVM=managedBy,subscriptionId\\r\\n| where OwnerVM =~ \\\"{ResourceId}\\\"\\r\\n)  on $left.[\\\"vhd/diskid\\\"]==$right.id\\r\\n| project-away id , OwnerVM, subscriptionId\",\"size\":4,\"title\":\"VM Storage Profile\",\"exportedParameters\":[{\"fieldName\":\"Computer\",\"parameterName\":\"Computer\",\"parameterType\":1},{\"fieldName\":\"ResourceId\",\"parameterName\":\"ResourceId\",\"parameterType\":1}],\"queryType\":1,\"resourceType\":\"microsoft.resourcegraph/resources\",\"crossComponentResources\":[\"{subscription}\"],\"gridSettings\":{\"formatters\":[{\"columnMatch\":\"Computer\",\"formatter\":5,\"formatOptions\":{}},{\"columnMatch\":\"SSH/RDP\",\"formatter\":0,\"formatOptions\":{},\"numberFormat\":{\"unit\":0,\"options\":{\"style\":\"decimal\"},\"emptyValCustomText\":\"\\\"N/A\\\"\"}},{\"columnMatch\":\"bootcount\",\"formatter\":0,\"formatOptions\":{},\"numberFormat\":{\"unit\":0,\"options\":{\"style\":\"decimal\"},\"emptyValCustomText\":\"\\\"N/A\\\"\"}},{\"columnMatch\":\"cpu_p95\",\"formatter\":4,\"formatOptions\":{\"palette\":\"coldHot\"},\"numberFormat\":{\"unit\":0,\"options\":{\"style\":\"decimal\",\"useGrouping\":false,\"maximumFractionDigits\":2}}},{\"columnMatch\":\"cpu_avg\",\"formatter\":0,\"formatOptions\":{},\"numberFormat\":{\"unit\":0,\"options\":{\"style\":\"decimal\",\"maximumFractionDigits\":2}}},{\"columnMatch\":\"mem_p95\",\"formatter\":4,\"formatOptions\":{\"palette\":\"blueDark\"},\"numberFormat\":{\"unit\":0,\"options\":{\"style\":\"decimal\",\"useGrouping\":false,\"maximumFractionDigits\":1},\"emptyValCustomText\":\"\\\"N/A\\\"\"}},{\"columnMatch\":\"InboundCon\",\"formatter\":0,\"formatOptions\":{},\"numberFormat\":{\"unit\":0,\"options\":{\"style\":\"decimal\"},\"emptyValCustomText\":\"\\\"N/A\\\"\"}},{\"columnMatch\":\"iops_p95\",\"formatter\":4,\"formatOptions\":{\"palette\":\"orange\"},\"numberFormat\":{\"unit\":0,\"options\":{\"style\":\"decimal\",\"useGrouping\":false,\"maximumFractionDigits\":1}}}],\"rowLimit\":1000,\"filter\":true},\"sortBy\":[]},\"conditionalVisibility\":{\"parameterName\":\"Computer\",\"comparison\":\"isNotEqualTo\"},\"name\":\"query - 0 - Copy - Copy - Copy\"},{\"type\":3,\"content\":{\"version\":\"KqlItem/1.0\",\"query\":\"let workstart=8;\\r\\nlet workend=17;\\r\\nlet timezoneoffset=4;\\r\\nlet cpu=InsightsMetrics\\r\\n| where TimeGenerated {TimeRange}\\r\\n| where tostring(split(_ResourceId,'/')[2])  in ({subscription:subid}) or '*' in ({subscription:subid})\\r\\n| where tostring(split(_ResourceId,'/')[4])  in ({rg}) or '*' in ({rg})\\r\\n| extend hour=datetime_part(\\\"hour\\\", TimeGenerated)+timezoneoffset\\r\\n| where hour between (workstart..workend)\\r\\n| where Namespace == \\\"Processor\\\" \\r\\n| where Name == \\\"UtilizationPercentage\\\"\\r\\n| summarize (cpu_p50,cpu_p95)=percentiles(Val,50,95),cpu_avg=avg(Val) by Computer, ResourceId=_ResourceId;\\r\\nlet mem=\\r\\nInsightsMetrics\\r\\n| where TimeGenerated {TimeRange}\\r\\n| extend hour=datetime_part(\\\"hour\\\", TimeGenerated)+timezoneoffset\\r\\n//| where hour between (workstart..workend)\\r\\n| where Namespace == \\\"Memory\\\" \\r\\n| where Name == \\\"AvailableMB\\\"\\r\\n|summarize (mem_p95)=percentiles(Val,95) by  Computer;\\r\\nlet iops=\\r\\nInsightsMetrics\\r\\n| where TimeGenerated {TimeRange}\\r\\n| extend hour=datetime_part(\\\"hour\\\", TimeGenerated)+timezoneoffset\\r\\n//| where hour between (workstart..workend)\\r\\n| where Namespace == \\\"LogicalDisk\\\" \\r\\n| where Name == \\\"TransfersPerSecond\\\"\\r\\n|summarize (iops_p95)=percentiles(Val,95) by  Computer;\\r\\nlet nwsent=InsightsMetrics\\r\\n| where TimeGenerated {TimeRange}\\r\\n| extend hour=datetime_part(\\\"hour\\\", TimeGenerated)+timezoneoffset\\r\\n//| where hour between (workstart..workend)\\r\\n| where Namespace == \\\"Network\\\"\\r\\n| where Name == \\\"WriteBytesPerSecond\\\" \\r\\n|summarize (nwsent)=percentiles(Val,95) by  Computer;\\r\\nlet nwrec=InsightsMetrics\\r\\n| where TimeGenerated {TimeRange}\\r\\n| extend hour=datetime_part(\\\"hour\\\", TimeGenerated)+timezoneoffset\\r\\n//| where hour between (workstart..workend)\\r\\n| where Namespace == \\\"Network\\\"\\r\\n| where Name == \\\"ReadBytesPerSecond\\\" \\r\\n|summarize (nwrec)=percentiles(Val,95) by  Computer;\\r\\nlet boot=Syslog\\r\\n| where Facility ==\\\"daemon\\\"\\r\\n| where SyslogMessage startswith \\\"Startup finished\\\" \\r\\n| where ProcessID == 1 \\r\\n|summarize bootcount=count() by Computer\\r\\n|union isfuzzy=true (Event\\r\\n| where TimeGenerated {TimeRange}\\r\\n| where EventLog == \\\"System\\\" \\r\\n| where EventID == 1074 \\r\\n|summarize bootcount=count() by Computer);\\r\\nlet logons=SecurityEvent\\r\\n| where EventID == 4624\\r\\n| where LogonTypeName  ==\\\"10 - RemoteInteractive\\\" \\r\\n| where Account !contains \\\"Font Driver Host\\\"  and  Account !contains \\\"Window Manager\\\"\\r\\n| summarize ['SSH/RDP']=count() by Computer\\r\\n|union isfuzzy=true  (Syslog\\r\\n| where Facility == \\\"auth\\\"\\r\\n| where SyslogMessage startswith \\\"Accepted password for\\\" or SyslogMessage startswith \\\"Accepted publickey for\\\"\\r\\n| summarize ['SSH/RDP']=count() by Computer);\\r\\nlet vmcon=VMConnection\\r\\n| where Direction == \\\"inbound\\\" \\r\\n| where SourceIp <> \\\"127.0.0.1\\\" \\r\\n| summarize InboundCon=sum(LinksEstablished+LinksTerminated+LinksLive) by Computer;\\r\\ncpu\\r\\n| join kind= leftouter (\\r\\n   mem\\r\\n) on Computer\\r\\n| join kind= leftouter (\\r\\n   nwsent\\r\\n) on Computer\\r\\n| join kind= leftouter (\\r\\n   nwrec\\r\\n) on Computer\\r\\n| join kind= leftouter (\\r\\n   boot\\r\\n) on Computer\\r\\n| join kind= leftouter (\\r\\n   logons\\r\\n) on Computer\\r\\n| join kind= leftouter (\\r\\n   iops\\r\\n) on Computer\\r\\n| join kind= leftouter (\\r\\n   vmcon\\r\\n) on Computer\\r\\n|project ResourceId,Computer , ['SSH/RDP'] , bootcount ,  cpu_p95 , cpu_avg ,mem_p95,Nw_Sent=format_bytes(nwsent), Nw_Rec=format_bytes(nwrec),InboundCon,iops_p95\\r\\n\\r\\n\\t\\t\\t\\r\\n\\r\\n        \",\"size\":0,\"title\":\"VM Usage Indicators\",\"timeContext\":{\"durationMs\":2592000000},\"timeContextFromParameter\":\"TimeRange\",\"exportedParameters\":[{\"fieldName\":\"Computer\",\"parameterName\":\"Computer\",\"parameterType\":1},{\"fieldName\":\"ResourceId\",\"parameterName\":\"ResourceId\",\"parameterType\":1}],\"queryType\":0,\"resourceType\":\"microsoft.operationalinsights/workspaces\",\"gridSettings\":{\"formatters\":[{\"columnMatch\":\"Computer\",\"formatter\":5,\"formatOptions\":{}},{\"columnMatch\":\"SSH/RDP\",\"formatter\":0,\"formatOptions\":{},\"numberFormat\":{\"unit\":0,\"options\":{\"style\":\"decimal\"},\"emptyValCustomText\":\"\\\"N/A\\\"\"}},{\"columnMatch\":\"bootcount\",\"formatter\":0,\"formatOptions\":{},\"numberFormat\":{\"unit\":0,\"options\":{\"style\":\"decimal\"},\"emptyValCustomText\":\"\\\"N/A\\\"\"}},{\"columnMatch\":\"cpu_p95\",\"formatter\":4,\"formatOptions\":{\"palette\":\"coldHot\"},\"numberFormat\":{\"unit\":0,\"options\":{\"style\":\"decimal\",\"useGrouping\":false,\"maximumFractionDigits\":2}}},{\"columnMatch\":\"cpu_avg\",\"formatter\":0,\"formatOptions\":{},\"numberFormat\":{\"unit\":0,\"options\":{\"style\":\"decimal\",\"maximumFractionDigits\":2}}},{\"columnMatch\":\"mem_p95\",\"formatter\":4,\"formatOptions\":{\"palette\":\"blueDark\"},\"numberFormat\":{\"unit\":0,\"options\":{\"style\":\"decimal\",\"useGrouping\":false,\"maximumFractionDigits\":1},\"emptyValCustomText\":\"\\\"N/A\\\"\"}},{\"columnMatch\":\"InboundCon\",\"formatter\":0,\"formatOptions\":{},\"numberFormat\":{\"unit\":0,\"options\":{\"style\":\"decimal\"},\"emptyValCustomText\":\"\\\"N/A\\\"\"}},{\"columnMatch\":\"iops_p95\",\"formatter\":4,\"formatOptions\":{\"palette\":\"orange\"},\"numberFormat\":{\"unit\":0,\"options\":{\"style\":\"decimal\",\"useGrouping\":false,\"maximumFractionDigits\":1}}}],\"rowLimit\":1000,\"filter\":true,\"sortBy\":[{\"itemKey\":\"$gen_number_InboundCon_9\",\"sortOrder\":1}]},\"sortBy\":[{\"itemKey\":\"$gen_number_InboundCon_9\",\"sortOrder\":1}]},\"conditionalVisibility\":{\"parameterName\":\"showhidden\",\"comparison\":\"isNotEqualTo\"},\"name\":\"query - 0 - Copy\"},{\"type\":11,\"content\":{\"version\":\"LinkItem/1.0\",\"style\":\"nav\",\"links\":[{\"cellValue\":\"showhistory\",\"linkTarget\":\"parameter\",\"linkLabel\":\"Show Perf History\",\"subTarget\":\"1\",\"preText\":\"\",\"style\":\"primary\"}]},\"customWidth\":\"20\",\"conditionalVisibility\":{\"parameterName\":\"Computer\",\"comparison\":\"isNotEqualTo\"},\"name\":\"links - 5\"},{\"type\":11,\"content\":{\"version\":\"LinkItem/1.0\",\"style\":\"nav\",\"links\":[{\"cellValue\":\"showhistory\",\"linkTarget\":\"parameter\",\"linkLabel\":\"Hide Perf History\",\"subTarget\":\"0\",\"style\":\"primary\"}]},\"customWidth\":\"20\",\"conditionalVisibility\":{\"parameterName\":\"Computer\",\"comparison\":\"isNotEqualTo\"},\"name\":\"links - 5 - Copy\"},{\"type\":9,\"content\":{\"version\":\"KqlParameterItem/1.0\",\"parameters\":[{\"id\":\"582c425e-8c37-4e87-87f0-efc17aa7274a\",\"version\":\"KqlParameterItem/1.0\",\"name\":\"Aggregates\",\"label\":\"Percentile\",\"type\":2,\"typeSettings\":{\"additionalResourceOptions\":[]},\"jsonData\":\"[\\r\\n    { \\\"value\\\":\\\"round(avg(Val), 2)\\\", \\\"label\\\":\\\"Average\\\", \\\"selected\\\":false },\\r\\n    { \\\"value\\\":\\\"round(percentile(Val, 1), 2)\\\", \\\"label\\\":\\\"P1st\\\", \\\"selected\\\":false},\\r\\n    { \\\"value\\\":\\\"round(percentile(Val, 5), 2)\\\", \\\"label\\\":\\\"P5th\\\", \\\"selected\\\":false},\\r\\n    { \\\"value\\\":\\\"round(percentile(Val, 10), 2)\\\", \\\"label\\\":\\\"P10th\\\", \\\"selected\\\":false},\\r\\n    { \\\"value\\\":\\\"round(percentile(Val, 50), 2)\\\", \\\"label\\\":\\\"P50th\\\", \\\"selected\\\":false},\\r\\n    { \\\"value\\\":\\\"round(percentile(Val, 90), 2)\\\", \\\"label\\\":\\\"P90th\\\", \\\"selected\\\":false},\\r\\n    { \\\"value\\\":\\\"round(percentile(Val, 95), 2)\\\", \\\"label\\\":\\\"P95th\\\", \\\"selected\\\":true},\\r\\n    { \\\"value\\\":\\\"round(percentile(Val, 99), 2)\\\", \\\"label\\\":\\\"P99th\\\", \\\"selected\\\":false}  \\r\\n]\",\"timeContext\":{\"durationMs\":2592000000},\"timeContextFromParameter\":\"TimeRange\",\"value\":\"round(percentile(Val, 99), 2)\"},{\"id\":\"2db5301e-bd7b-479d-a375-f247e2e5757d\",\"version\":\"KqlParameterItem/1.0\",\"name\":\"AggregatesRight\",\"type\":1,\"query\":\"print \\\"{Aggregates}\\\"\",\"crossComponentResources\":[\"{Workspace}\"],\"isHiddenWhenLocked\":true,\"timeContext\":{\"durationMs\":2592000000},\"timeContextFromParameter\":\"TimeRange\",\"queryType\":0,\"resourceType\":\"microsoft.operationalinsights/workspaces\"},{\"id\":\"457dd68b-0820-48f9-b940-c86141a13fcc\",\"version\":\"KqlParameterItem/1.0\",\"name\":\"TimeRangePerf\",\"label\":\"TimeRange\",\"type\":4,\"isRequired\":true,\"value\":{\"durationMs\":2592000000},\"typeSettings\":{\"selectableValues\":[{\"durationMs\":1800000},{\"durationMs\":3600000},{\"durationMs\":14400000},{\"durationMs\":43200000},{\"durationMs\":86400000},{\"durationMs\":172800000},{\"durationMs\":259200000},{\"durationMs\":604800000},{\"durationMs\":1209600000},{\"durationMs\":2419200000},{\"durationMs\":2592000000},{\"durationMs\":5184000000},{\"durationMs\":7776000000}]}}],\"style\":\"pills\",\"queryType\":0,\"resourceType\":\"microsoft.operationalinsights/workspaces\"},\"name\":\"parameters - 20 - Copy - Copy\"},{\"type\":1,\"content\":{\"json\":\"**Selected Performance Aggregation : {Aggregates:label}   for Computer  : {Computer}**\",\"style\":\"info\"},\"name\":\"text - 21\"},{\"type\":3,\"content\":{\"version\":\"KqlItem/1.0\",\"query\":\"let bucketsize=case({TimeRangePerf:end}-{TimeRangePerf:start}>60d, 4h,{TimeRangePerf:end}-{TimeRangePerf:start}>7d, 1h,{TimeRangePerf:end}-{TimeRangePerf:start}>1d,1h,10m);\\r\\nInsightsMetrics\\r\\n| where TimeGenerated {TimeRangePerf}\\r\\n| where tostring(split(_ResourceId,'/')[2])  in ({subscription:subid}) or '*' in ({subscription:subid})\\r\\n| where tostring(split(_ResourceId,'/')[4])  in ({rg}) or '*' in ({rg})\\r\\n| where Computer == \\\"{Computer}\\\"\\r\\n| where Namespace == \\\"LogicalDisk\\\" \\r\\n| where Name == \\\"TransfersPerSecond\\\"\\r\\n| extend Disk = tostring(parse_json(Tags).[\\\"vm.azm.ms/mountId\\\"])\\r\\n|summarize (IOPs)={AggregatesRight}  by  strcat(Computer,\\\"::\\\",Disk),bin (TimeGenerated , bucketsize);\\r\\n\",\"size\":1,\"aggregation\":3,\"title\":\"IOPS History\",\"timeContext\":{\"durationMs\":0},\"timeContextFromParameter\":\"TimeRange\",\"showExportToExcel\":true,\"queryType\":0,\"resourceType\":\"microsoft.operationalinsights/workspaces\",\"crossComponentResources\":[\"{Workspace}\"],\"visualization\":\"linechart\",\"gridSettings\":{\"sortBy\":[{\"itemKey\":\"TimeGenerated\",\"sortOrder\":1}]},\"sortBy\":[{\"itemKey\":\"TimeGenerated\",\"sortOrder\":1}],\"chartSettings\":{\"seriesLabelSettings\":[{\"seriesName\":\"AzDemoSrv1.SCLAB.local\",\"color\":\"green\"}]}},\"conditionalVisibility\":{\"parameterName\":\"showhistory\",\"comparison\":\"isEqualTo\",\"value\":\"1\"},\"name\":\"query - 5 - Copy - Copy\"},{\"type\":3,\"content\":{\"version\":\"KqlItem/1.0\",\"query\":\"let bucketsize=case({TimeRangePerf:end}-{TimeRangePerf:start}>60d, 4h,{TimeRangePerf:end}-{TimeRangePerf:start}>7d, 1h,{TimeRangePerf:end}-{TimeRangePerf:start}>1d,1h,10m);\\r\\nInsightsMetrics\\r\\n| where TimeGenerated {TimeRangePerf}\\r\\n| where tostring(split(_ResourceId,'/')[2])  in ({subscription:subid}) or '*' in ({subscription:subid})\\r\\n| where tostring(split(_ResourceId,'/')[4])  in ({rg}) or '*' in ({rg})\\r\\n| where Computer == \\\"{Computer}\\\"\\r\\n| where Namespace == \\\"LogicalDisk\\\" \\r\\n| where Name == \\\"TransferLatencyMs\\\"\\r\\n| extend Disk = tostring(parse_json(Tags).[\\\"vm.azm.ms/mountId\\\"])\\r\\n|summarize (IOPs)={AggregatesRight}  by  strcat(Computer,\\\"::\\\",Disk), bin (TimeGenerated , bucketsize);\\r\\n\",\"size\":1,\"aggregation\":3,\"showAnalytics\":true,\"title\":\"IOPs Latency ms \",\"timeContext\":{\"durationMs\":2592000000},\"timeContextFromParameter\":\"TimeRange\",\"showExportToExcel\":true,\"queryType\":0,\"resourceType\":\"microsoft.operationalinsights/workspaces\",\"crossComponentResources\":[\"{Workspace}\"],\"visualization\":\"linechart\",\"gridSettings\":{\"sortBy\":[{\"itemKey\":\"TimeGenerated\",\"sortOrder\":1}]},\"sortBy\":[{\"itemKey\":\"TimeGenerated\",\"sortOrder\":1}],\"chartSettings\":{\"seriesLabelSettings\":[{\"seriesName\":\"AzDemoSrv1.SCLAB.local\",\"color\":\"green\"}]}},\"conditionalVisibility\":{\"parameterName\":\"showhistory\",\"comparison\":\"isEqualTo\",\"value\":\"1\"},\"name\":\"query - 5 - Copy - Copy - Copy\"},{\"type\":3,\"content\":{\"version\":\"KqlItem/1.0\",\"query\":\"let bucketsize=case({TimeRangePerf:end}-{TimeRangePerf:start}>60d, 4h,{TimeRangePerf:end}-{TimeRangePerf:start}>7d, 1h,{TimeRangePerf:end}-{TimeRangePerf:start}>1d,1h,10m);\\r\\nInsightsMetrics\\r\\n| where TimeGenerated {TimeRangePerf}\\r\\n| where tostring(split(_ResourceId,'/')[2])  in ({subscription:subid}) or '*' in ({subscription:subid})\\r\\n| where tostring(split(_ResourceId,'/')[4])  in ({rg}) or '*' in ({rg})\\r\\n| where Computer == \\\"{Computer}\\\"\\r\\n| where Namespace == \\\"LogicalDisk\\\" \\r\\n| where Name == \\\"FreeSpaceMB\\\"\\r\\n| extend Disk = tostring(parse_json(Tags).[\\\"vm.azm.ms/mountId\\\"])\\r\\n| extend SizeMB = todouble(parse_json(Tags).[\\\"vm.azm.ms/diskSizeMB\\\"])\\r\\n| project TimeGenerated, Computer, Disk,  Val=round((Val*100/SizeMB),0)\\r\\n|summarize (['%Free'])={AggregatesRight}  by  strcat(Computer,\\\"::\\\",Disk), bin (TimeGenerated , bucketsize);\\r\\n\\r\\n\\r\\n\",\"size\":1,\"aggregation\":3,\"showAnalytics\":true,\"title\":\"% Free\",\"timeContext\":{\"durationMs\":2592000000},\"timeContextFromParameter\":\"TimeRange\",\"showExportToExcel\":true,\"queryType\":0,\"resourceType\":\"microsoft.operationalinsights/workspaces\",\"crossComponentResources\":[\"{Workspace}\"],\"visualization\":\"linechart\",\"gridSettings\":{\"sortBy\":[{\"itemKey\":\"TimeGenerated\",\"sortOrder\":1}]},\"sortBy\":[{\"itemKey\":\"TimeGenerated\",\"sortOrder\":1}],\"chartSettings\":{\"seriesLabelSettings\":[{\"seriesName\":\"AzDemoSrv1.SCLAB.local\",\"color\":\"green\"}]}},\"conditionalVisibility\":{\"parameterName\":\"showhistory\",\"comparison\":\"isEqualTo\",\"value\":\"1\"},\"name\":\"query - 5 - Copy - Copy - Copy - Copy\"}]},\"conditionalVisibilities\":[{\"parameterName\":\"VMInsightsEnabled\",\"comparison\":\"isNotEqualTo\"},{\"parameterName\":\"rg\",\"comparison\":\"isNotEqualTo\"}],\"name\":\"PerfData\"}],\"isLocked\":false,\"defaultResourceIds\":[\"/subscriptions/2de20a16-20c6-41af-82cd-bceb39195d1c/resourceGroups/rg-shared-sc-weu/providers/Microsoft.OperationalInsights/workspaces/la-prod-sc-weu\",\"Azure Monitor\"],\"fallbackResourceIds\":[\"/subscriptions/2de20a16-20c6-41af-82cd-bceb39195d1c/resourceGroups/rg-shared-sc-weu/providers/Microsoft.OperationalInsights/workspaces/la-prod-sc-weu\",\"Azure Monitor\"]}",
        "version": "1.0",
        "sourceId": "[parameters('workbookSourceId')]",
        "category": "[parameters('workbookType')]"
      }
    }
  ],
  "outputs": {
    "workbookId": {
      "type": "string",
      "value": "[resourceId( 'microsoft.insights/workbooks', parameters('workbookId'))]"
    }
  },
  "$schema": "http://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#"
}